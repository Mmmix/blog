<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<title>Document</title>
		<script type="text/javascript" src="../js/vue.js"></script>
		<script src="../js/vue-resource.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../layui/css/layui.css">
		<link rel="stylesheet" type="text/css" href="../css/main.css">
		<!--加载meta IE兼容文件-->
		<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
<![endif]-->
	</head>

	<body>
		<div id="app">
			<div class="header">
				<h1 class="logo">
			      <a href="index.html">
			        <span>MYBLOG</span>
			        <img src="../img/logo.png">
			      </a>
			    </h1>
				<div class="nav">
					<a href="index.html" class="active">文章</a>
					<a href="leacots.html">留言</a>
					<a href="album.html">相册</a>
					<a href="about.html">关于</a>

					<a href="blogManagement.html">管理员</a>
				</div>
				<!--<ul class="layui-nav" style="background-color: white;">
					<li class="layui-nav-item">
						<a href="index.html" class="active">文章</a>
					</li>
					<li class="layui-nav-item">
						<a href="leacots.html">留言</a>
					</li>
					<li class="layui-nav-item">
						<a href="album.html">相册</a>
					</li>
					<li class="layui-nav-item">
						<a href="about.html">关于</a>
					</li>
				</ul>
				-->
				<input type="text" class="layui-input-block search_nav" v-model="title" @blur="getData(1)" placeholder="按标题搜索" />
				<p class="welcome-text">
					欢迎来到<span class="name">决赛圈</span>的博客~
				</p>
			</div>

			<div class="banner">
				<div class="cont w1000">
					<div class="title">
						<h3>MY<br />BLOG</h3>
						<h4>{{message}}</h4>
					</div>
					<!--<div class="amount">
						<p><span class="text">访问量</span><span class="access">1000</span></p>
						<p><span class="text">日志</span><span class="daily-record">1000</span></p>
					</div>-->
				</div>
			</div>
			<div class="content">
				<div class="cont w1000">
					<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
					  <ul class="layui-tab-title">
					    <li class="layui-this" @click="setCategory('')">所有</li>
					    <li @click="setCategory('学习')">学习</li>
					    <li @click="setCategory('生活')">生活</li>
					    <li @click="setCategory('感悟')">感悟</li>
					  </ul>
					  <div class="layui-tab-content"></div>
					</div> 
					<div class="list-item">
						<!--{{listData}}-->
						<div class="item" v-for="artdata in listData.list">
							<div class="layui-fluid">
								<div class="layui-row">
									<div class="layui-col-xs12 layui-col-sm4 layui-col-md5">
										<div class="img"><img v-if="artdata.subimage==null" src="../img/sy_img2.jpg" alt=""><img v-else :src="artdata.subimage" alt=""></div>
									</div>
									<div class="layui-col-xs12 layui-col-sm8 layui-col-md7">
										<div class="item-cont">
											<h3>{{artdata.title}}<button class="layui-btn layui-btn-danger new-icon">new</button></h3>
											<h5>{{artdata.category}}</h5>
											<p>{{artdata.context}}</p>
											<a href="details.html" v-on:click="goDetail(artdata.id)" class="go-icon"></a>
											<div>
												<dl class="bottom_bar">
													<dd>{{artdata.createTime}}</dd>
													<div class="floatR">
														<!--阅读 begin-->
														<dd class="read_num">
															<a href="#">
																<span class="text">阅读数</span>
																<span class="num">{{artdata.read}}</span>
															</a>
														</dd>
														<div class="interval"></div>
														<!--阅读 end-->
														<!--新增评论数+阅读 begin-->
														<dd class="common_num ">
															<a href="#" target="_blank">
																<span class="text">评论数 </span>
																<span class="num">{{artdata.comment}}</span>
															</a>
														</dd>
														<!--新增评论数+阅读 end-->
													</div>
												</dl>
											</div>
											<!--<span>{{artdata.createTime}}</span>
											<div class="right">
												<span class="text">阅读数:</span>
												<span class="num">{{artdata.read}}</span>
											</div>-->

										</div>
									</div>
								</div>
							</div>
						</div>
						<!--<div class="item">
						<div class="layui-fluid">
							<div class="layui-row">
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md5">
									<div class="img"><img src="../img/sy_img5.jpg" alt=""></div>
								</div>
								<div class="layui-col-xs12 layui-col-sm8 layui-col-md7">
									<div class="item-cont">
										<h3>空间立体效果图，完美呈现最终效果<button class="layui-btn layui-btn-danger new-icon">new</button></h3>
										<h5>设计文章</h5>
										<p>室内设计作为一门新兴的学科，尽管还只是近数十年的事，但是人们有意识地对自己生活、生产活动的室内进行安排布置，甚至美化装饰，赋予室内环境以所祈使的气氛，却早巳从人类文明伊始的时期就已存在</p>
										<a href="details.html" class="go-icon"></a>
									</div>
								</div>
							</div>
						</div>
					</div>-->
					</div>
					<div id="demo" style="text-align: center;"></div>
				</div>
			</div>

			<div class="footer-wrap">
				<div class="footer w1000">
					<div class="qrcode">
						<img src="../img/erweima.jpg">
					</div>
					<div class="practice-mode">
						<img src="../img/down_img.jpg">
						<div class="text">
							<h4 class="title">我的联系方式</h4>
							<p>微信<span class="WeChat">13733439977</span></p>
							<p>邮箱<span class="email">931634226@qq.com</span></p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script type="text/javascript" src="../layui/layui.js"></script>
		<script>
			layui.use(['element', 'jquery'], function() {
				element = layui.element, $ = layui.$;
			});
			var localhost = "http://localhost:8080";
			var app = new Vue({
				el: '#app',
				data: {
					listData: [],
					message: 'WINNER WINNER CHICKEN DINNER!',
					title: "",
					category: ""
				},
				methods: {
					getData: function(n) {
						var _this = this;
						Vue.http.get(localhost + '/blog/list/' + n, {
							params: {
								'title': _this.title,
								'category': _this.category,
								'pageSize': 5
							}
						}).then(function(res) {
							_this.listData = res.body.data;

							if(res.body.data.pageNum == 1) {
								layui.use('laypage', function() {
									layui.laypage.render({
										elem: 'demo',
										limit: app.listData.pageSize,
										count: app.listData.pages * app.listData.pageSize, //数据总数，从服务端得到
										jump: function(obj, first) {
											//首次不执行
											if(!first) {
												//do something
												app.getData(obj.curr);
											}
										}
									});
								});

							}
							//			                console.log(_this.listData);
						}, function() {
							console.log('请求失败处理');
						});
					},
					goDetail: function(id) {
						sessionStorage.setItem("detailId", id);
					},
					setCategory: function(name){
						this.category = name;
						this.getData(1);
					}
				}
			})

			app.getData(1);
		</script>
	</body>

</html>